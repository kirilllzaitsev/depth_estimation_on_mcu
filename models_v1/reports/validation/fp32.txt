
Starting AI validation on desktop with random data...
  
/home/master/STM32Cube/Repository/Packs/STMicroelectronics/X-CUBE-AI/8.0.1/Utilities/linux/stm32ai validate --name network -m /media/master/wext/msc_studies/second_semester/microcontrollers/project/stm32/code/models/depth_model_fp32.tflite --type tflite --compression none --verbosity 1 --workspace /tmp/mxAI_workspace48359074054922178923707356348094 --output /home/master/.stm32cubemx/network_output --allocate-inputs --allocate-outputs  
Neural Network Tools for STM32AI v1.7.0 (STM.ai v8.0.1-19450) 
Applied 7 of 8 optimizations 
fatal: not a git repository (or any of the parent directories): .git 
Copying the AI runtime files to the user workspace: /tmp/mxAI_workspace48359074054922178923707356348094/inspector_network/workspace 
  
 Exec/report summary (validate) 
 ------------------------------------------------------------------------------------------------------------------------------------------- 
 model file         :   /media/master/wext/msc_studies/second_semester/microcontrollers/project/stm32/code/models/depth_model_fp32.tflite    
 type               :   tflite                                                                                                               
 c_name             :   network                                                                                                              
 compression        :   none                                                                                                                 
 options            :   allocate-inputs, allocate-outputs                                                                                    
 optimization       :   balanced                                                                                                             
 target/series      :   generic                                                                                                              
 workspace dir      :   /tmp/mxAI_workspace48359074054922178923707356348094                                                                  
 output dir         :   /home/master/.stm32cubemx/network_output                                                                             
 model_fmt          :   float                                                                                                                
 model_name         :   depth_model_fp32                                                                                                     
 model_hash         :   f3180490faf884f56516382012ffb3cb                                                                                     
 params #           :   285,481 items (1115.16 KiB)                                                                                          
 ------------------------------------------------------------------------------------------------------------------------------------------- 
 input 1/1          :   'serving_default_input0' (domain:activations/**default**)                                                            
                    :   12288 items, 48.00 KiB, ai_float, float, (1,64,64,3)                                                                 
 output 1/1         :   'conv2d_50' (domain:activations/**default**)                                                                         
                    :   4096 items, 16.00 KiB, ai_float, float, (1,64,64,1)                                                                  
 macc               :   65,107,097                                                                                                           
 weights (ro)       :   1,141,732 B (1114.97 KiB) (1 segment) / -192(-0.0%) vs float model                                                   
 activations (rw)   :   989,184 B (966.00 KiB) (1 segment) *                                                                                 
 ram (total)        :   989,184 B (966.00 KiB) = 989,184 + 0 + 0                                                                             
 ------------------------------------------------------------------------------------------------------------------------------------------- 
 (*) 'input'/'output' buffers can be used from the activations buffer 
                                                        
Setting validation data... 
 generating random data, size=10, seed=42, range=(0, 1) 
 I[1]: (10, 64, 64, 3)/float32, min/max=[0.000, 1.000], mean/std=[0.500, 0.288], serving_default_input0 
 No output/reference samples are provided 
                                                        
Running the STM AI c-model (AI RUNNER)...(name=network, mode=x86) 
                                                        
 X86 shared lib (/tmp/mxAI_workspace48359074054922178923707356348094/inspector_network/workspace/lib/libai_network.so) ['network'] 
                                                        
  Summary "network" - ['network'] 
  --------------------------------------------------------------------------------------------- 
  inputs/ouputs      :   1/1 
  input_1            :   input_1, (1,64,64,3), float32, 49,152 bytes, in activations buffer 
  output_1           :   output_1, (1,64,64,1), float32, 16,384 bytes, in activations buffer 
  n_nodes            :   36 
  compile_datetime   :   Jun 18 2023 14:34:31 
  activations        :   989184 
  weights            :   1141732 
  macc               :   65107097 
  --------------------------------------------------------------------------------------------- 
  runtime            :   STM.AI 8.0.0 (Tools 8.0.1) 
  capabilities       :   IO_ONLY, PER_LAYER, PER_LAYER_WITH_DATA 
  device             :   x86_64 x86_64 (Linux) 
                                                        
 NOTE: duration and exec time per layer is just an indication. They are dependent of the HOST-machine work-load. 
                                                        
  STM.AI Profiling results v1.2 - network 
  --------------------------------------------------------------- 
  nb sample(s)    :   10 
  duration        :   22.657ms by sample (22.391/23.624/0.342) 
  macc            :   65107097 
  --------------------------------------------------------------- 
  HOST duration   :   0.242s (total) 
  --------------------------------------------------------------- 
                                                        
   Inference time per node 
   --------------------------------------------------------------------------- 
   c_id    m_id   type                 dur (ms)     %            name 
   --------------------------------------------------------------------------- 
   0       0      Conv2D (0x103)            0.478      2.1%      ai_node_0 
   1       2      Conv2D (0x103)            0.132      0.6%      ai_node_1 
   2       3      Conv2D (0x103)            0.491      2.2%      ai_node_2 
   3       4      Conv2D (0x103)            0.241      1.1%      ai_node_3 
   4       6      Conv2dPool (0x109)        0.726      3.2%      ai_node_4 
   5       1      Conv2D (0x103)            0.107      0.5%      ai_node_5 
   6       7      Eltwise (0x113)           0.004      0.0%      ai_node_6 
   7       14     Conv2D (0x103)            0.089      0.4%      ai_node_7 
   8       8      NL (0x107)                0.030      0.1%      ai_node_8 
   9       9      Conv2D (0x103)            0.059      0.3%      ai_node_9 
   10      10     Conv2D (0x103)            0.357      1.6%      ai_node_10 
   11      11     Conv2D (0x103)            0.116      0.5%      ai_node_11 
   12      13     Conv2dPool (0x109)        0.788      3.5%      ai_node_12 
   13      15     Eltwise (0x113)           0.002      0.0%      ai_node_13 
   14      23     Upsample (0x112)          0.003      0.0%      ai_node_14 
   15      24     Conv2D (0x103)            0.729      3.2%      ai_node_15 
   16      16     NL (0x107)                0.016      0.1%      ai_node_16 
   17      19     Conv2D (0x103)            1.917      8.5%      ai_node_17 
   18      21     Conv2D (0x103)            1.926      8.5%      ai_node_18 
   19      22     Upsample (0x112)          0.003      0.0%      ai_node_19 
   20      25     Eltwise (0x113)           0.008      0.0%      ai_node_20 
   21      35     Upsample (0x112)          0.013      0.1%      ai_node_21 
   22      36     Conv2D (0x103)            1.404      6.2%      ai_node_22 
   23      26     NL (0x107)                0.031      0.1%      ai_node_23 
   24      31     Conv2D (0x103)            4.027     17.8%      ai_node_24 
   25      33     Conv2D (0x103)            1.857      8.2%      ai_node_25 
   26      34     Upsample (0x112)          0.011      0.0%      ai_node_26 
   27      37     Eltwise (0x113)           0.014      0.1%      ai_node_27 
   28      47     Upsample (0x112)          0.042      0.2%      ai_node_28 
   29      48     Conv2D (0x103)            1.206      5.3%      ai_node_29 
   30      38     NL (0x107)                0.045      0.2%      ai_node_30 
   31      43     Conv2D (0x103)            3.805     16.8%      ai_node_31 
   32      45     Conv2D (0x103)            1.615      7.1%      ai_node_32 
   33      46     Upsample (0x112)          0.027      0.1%      ai_node_33 
   34      49     Eltwise (0x113)           0.031      0.1%      ai_node_34 
   35      51     Conv2D (0x103)            0.306      1.4%      ai_node_35 
   --------------------------------------------------------------------------- 
   total                                   22.656 
   --------------------------------------------------------------------------- 
                                                        
   Statistic per tensor 
   ----------------------------------------------------------------------------- 
   tensor   shape/type                 min     max     mean      std name 
   ----------------------------------------------------------------------------- 
   I.0      (1,64,64,3)/float32      0.000   1.000    0.500    0.288 input_1 
   O.0      (1,64,64,1)/float32     -0.299   0.573    0.193    0.094 output_1 
   ----------------------------------------------------------------------------- 
                                                        
Running the TFlite model... 
INFO: Created TensorFlow Lite XNNPACK delegate for CPU. 
                                                        
Saving validation data... 
 output directory: /home/master/.stm32cubemx/network_output 
 creating /home/master/.stm32cubemx/network_output/network_val_io.npz 
 m_outputs_1: (10, 64, 64, 1)/float32, min/max=[-0.279, 0.542], mean/std=[0.175, 0.096], conv2d_50 
 c_outputs_1: (10, 64, 64, 1)/float32, min/max=[-0.299, 0.573], mean/std=[0.193, 0.094], conv2d_50 
                                                        
Computing the metrics... 
                                                        
 Cross accuracy report #1 (reference vs C-model) 
 ---------------------------------------------------------------------------------------------------- 
 notes: - ACC metric is not computed ("--classifier" option can be used to force it) 
        - the output of the reference model is used as ground truth/reference value 
        - 10 samples (4096 items per sample) 
                                                        
  acc=n.a., rmse=0.046316385, mae=0.029674539, l2r=0.215450212, nse=76.58% 
                                                        
 Evaluation report (summary) 
 ------------------------------------------------------------------------------------------------------------------------------------------------------- 
 Output       acc    rmse        mae         l2r         mean         std         nse         cos         tensor 
 ------------------------------------------------------------------------------------------------------------------------------------------------------- 
 X-cross #1   n.a.   0.0463164   0.0296745   0.2154502   -0.0180108   0.0426716   0.7657571   0.9777460   conv2d_50, ai_float, (1,64,64,1), m_id=[51] 
 ------------------------------------------------------------------------------------------------------------------------------------------------------- 
                                                        
  acc  : Classification accuracy (all classes) 
  rmse : Root Mean Squared Error 
  mae  : Mean Absolute Error 
  l2r  : L2 relative error 
  nse  : Nash-Sutcliffe efficiency criteria 
  cos  : COsine Similarity 
                                                        
Creating txt report file /home/master/.stm32cubemx/network_output/network_validate_report.txt 
elapsed time (validate): 73.919s 
Validation ended